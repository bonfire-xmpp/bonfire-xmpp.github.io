(window.webpackJsonp=window.webpackJsonp||[]).push([[26,25],{581:function(e,t,r){var content=r(591);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(12).default)("7184fb9f",content,!0,{sourceMap:!1})},582:function(e,t,r){var content=r(593);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(12).default)("09146e1d",content,!0,{sourceMap:!1})},584:function(e,t,r){"use strict";r.r(t);r(24),r(35),r(580),r(25),r(86);var n=r(40),o={name:"HeadingMessage",props:{from:String,body:String,timestamp:String|Number,showTime:{default:!0,type:Boolean},showFullJid:{default:!1,type:Boolean},darkenOnHover:{default:!1,type:Boolean}},formatTime:function(e){var t=e.getHours(),r=t>12?"PM":"AM";return"".concat((t%=12).toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0")," ").concat(r)},getLocal:function(e){return n.a.getLocal(e)}},c=(r(590),r(9)),component=Object(c.a)(o,(function(e,t){var r=t._c;return r("div",{staticClass:"header-message d-flex align-top px-4 white--text",class:{"darken-on-hover":t.props.darkenOnHover}},[r("avatar",{staticClass:"flex-grow-0 mt-1",attrs:{size:40,jid:t.props.from}}),t._v(" "),r("main",{staticClass:"ml-4 h-100 d-flex flex-column"},[r("div",{staticClass:"unselectable"},[r("b",[t._v(t._s(t.props.showFullJid?t.props.from:t.$options.getLocal(t.props.from)))]),t._v(" "),r("span",{staticClass:"ml-1 grey-600--text timestamp"},[t._v(t._s(t.$options.formatTime(new Date(t.props.timestamp))))])]),t._v(" "),r("div",{staticClass:"content"},[t._v(t._s(t.props.body))])])],1)}),[],!0,null,"75ce1576",null);t.default=component.exports;installComponents(component,{Avatar:r(160).default})},589:function(e,t,r){"use strict";r.r(t);r(24),r(35),r(580),r(25),r(86);var n={name:"BodyMessage",props:{from:String,body:String,timestamp:String|Number,showTime:{default:!0,type:Boolean},showFullJid:{default:!1,type:Boolean},darkenOnHover:{default:!1,type:Boolean}},formatTime:function(e){var t=e.getHours(),r=t>12?"PM":"AM";return"".concat((t%=12).toString().padStart(2,"0"),":").concat(e.getMinutes().toString().padStart(2,"0")," ").concat(r)}},o=(r(592),r(9)),component=Object(o.a)(n,(function(e,t){var r=t._c;return r("div",{staticClass:"body-message d-flex px-4 white--text w-100",class:{"darken-on-hover":t.props.darkenOnHover}},[r("div",{staticClass:"gutter flex-shrink-0 unselectable"},[r("span",{staticClass:"timestamp grey-600--text"},[t._v(t._s(t.$options.formatTime(new Date(t.props.timestamp))))])]),t._v(" "),r("div",{staticClass:"ml-4 content"},[t._v(t._s(t.props.body.trim()))])])}),[],!0,null,"77c14af4",null);t.default=component.exports},590:function(e,t,r){"use strict";r(581)},591:function(e,t,r){var n=r(11)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Mukta:wght@200;300;400;500;600;700;800&display=swap);"]),n.push([e.i,".header-message[data-v-75ce1576]{min-height:3rem}.content[data-v-75ce1576]{font-weight:300;white-space:pre-line;word-wrap:anywhere}.timestamp[data-v-75ce1576]{font-size:.75em}.body-message[data-v-75ce1576]{min-height:1.5rem}.body-message:not(:hover) .timestamp[data-v-75ce1576]{display:none}.body-message[data-v-75ce1576],.header-message[data-v-75ce1576]{overflow:hidden}.darken-on-hover[data-v-75ce1576]:hover{background:#48423e!important}.gutter[data-v-75ce1576]{width:40px}",""]),e.exports=n},592:function(e,t,r){"use strict";r(582)},593:function(e,t,r){var n=r(11)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Mukta:wght@200;300;400;500;600;700;800&display=swap);"]),n.push([e.i,".header-message[data-v-77c14af4]{min-height:3rem}.content[data-v-77c14af4]{font-weight:300;white-space:pre-line;word-wrap:anywhere}.timestamp[data-v-77c14af4]{font-size:.75em}.body-message[data-v-77c14af4]{min-height:1.5rem}.body-message:not(:hover) .timestamp[data-v-77c14af4]{display:none}.body-message[data-v-77c14af4],.header-message[data-v-77c14af4]{overflow:hidden}.darken-on-hover[data-v-77c14af4]:hover{background:#48423e!important}.gutter[data-v-77c14af4]{width:40px}",""]),e.exports=n},594:function(e,t,r){"use strict";r.r(t);r(24);var n=r(584),o=r(589),c={name:"Message",components:{HeadingMessage:n.default,BodyMessage:o.default},props:{from:String,body:String,timestamp:String|Number,showTime:{default:!0,type:Boolean},showFullJid:{default:!1,type:Boolean},heading:{default:!1,type:Boolean},darkenOnHover:{default:!1,type:Boolean}}},l=r(9),component=Object(l.a)(c,(function(e,t){var r=t._c;return t.props.heading?r("heading-message",t._b({},"heading-message",t.props,!1)):r("body-message",t._b({},"body-message",t.props,!1))}),[],!0,null,null,null);t.default=component.exports},599:function(e,t,r){var content=r(619);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(12).default)("61f3b5d8",content,!0,{sourceMap:!1})},617:function(e,t,r){var content=r(633);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(12).default)("15228f04",content,!0,{sourceMap:!1})},618:function(e,t,r){"use strict";r(599)},619:function(e,t,r){var n=r(11)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Mukta:wght@200;300;400;500;600;700;800&display=swap);"]),n.push([e.i,".result[data-v-13842285]{background-color:#504945}",""]),e.exports=n},620:function(e,t,r){var content=r(637);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(12).default)("7117a011",content,!0,{sourceMap:!1})},621:function(e,t,r){var content=r(639);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(12).default)("ad011046",content,!0,{sourceMap:!1})},626:function(e,t,r){"use strict";r.r(t);var n=r(594),o=r(584),c={name:"SearchResult",components:{Message:n.default,HeadingMessage:o.default},props:{result:Object}},l=(r(618),r(9)),component=Object(l.a)(c,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"result mx-2 rounded pa-1"},[r("message",{attrs:{heading:"",from:e.result.from,body:e.result.body,timestamp:e.result.timestamp}})],1)}),[],!1,null,"13842285",null);t.default=component.exports},632:function(e,t,r){"use strict";r(617)},633:function(e,t,r){var n=r(11)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Mukta:wght@200;300;400;500;600;700;800&display=swap);"]),n.push([e.i,'.message-form[data-v-602415d5]{position:relative;background-color:transparent}.message-form[data-v-602415d5]:before{left:0}.message-form[data-v-602415d5]:after,.message-form[data-v-602415d5]:before{background:linear-gradient(180deg,transparent,#504945);content:"";position:absolute;top:0;height:.5rem;width:16px}.message-form[data-v-602415d5]:after{right:0}.gutter[data-v-602415d5]{min-height:1.6rem;max-height:1.6rem;height:1.6rem;font-size:.9em}.gutter>*[data-v-602415d5]{display:inline}[data-v-602415d5] .v-text-field__slot textarea::-moz-placeholder{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[data-v-602415d5] .v-text-field__slot textarea:-ms-input-placeholder{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[data-v-602415d5] .v-text-field__slot textarea::placeholder{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}',""]),e.exports=n},636:function(e,t,r){"use strict";r(620)},637:function(e,t,r){var n=r(11)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Mukta:wght@200;300;400;500;600;700;800&display=swap);"]),n.push([e.i,".search-menu[data-v-39927c8a]{min-width:400px;max-width:400px;width:400px}.search-menu[data-v-39927c8a]:not(.hidden){display:none}",""]),e.exports=n},638:function(e,t,r){"use strict";r(621)},639:function(e,t,r){var n=r(11)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Mukta:wght@200;300;400;500;600;700;800&display=swap);"]),n.push([e.i,".main[data-v-6ccb7502]{min-height:42px;max-height:42px;height:42px}",""]),e.exports=n},646:function(e,t,r){"use strict";r.r(t);r(53);var n={name:"ChatMessageForm",props:{label:{type:String,optional:!0,default:""}},data:function(){return{message:"",composingTimeout:null}},methods:{keypress:function(e){13!==e.which||e.shiftKey?this.change():(e.preventDefault(),this.emitMessage())},emitMessage:function(){this.message.length&&(this.$emit("message",this.message),this.message="")},change:function(){var e=this;this.composingTimeout||this.$emit("composing"),clearTimeout(this.composingTimeout),this.composingTimeout=setTimeout((function(){e.composingTimeout=void 0,e.$emit("paused")}),2e3)}}},o=(r(632),r(9)),c=r(15),l=r.n(c),d=r(668),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("form",{staticClass:"px-4 message-form mt-n2",on:{submit:function(t){return t.preventDefault(),e.emitMessage(t)}}},[r("v-textarea",{attrs:{solo:"",flat:"",dense:"","no-resize":"","hide-details":"","single-line":"","auto-grow":"",rows:1,"background-color":"grey-300","append-icon":"mdi-send",placeholder:e.label},on:{keydown:e.keypress},model:{value:e.message,callback:function(t){e.message=t},expression:"message"}}),e._v(" "),r("div",{staticClass:"gutter white--text d-flex flex-row align-center"},[e._t("default")],2)],1)}),[],!1,null,"602415d5",null);t.default=component.exports;l()(component,{VTextarea:d.a})},653:function(e,t,r){var content=r(670);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(12).default)("a9cbba9e",content,!0,{sourceMap:!1})},657:function(e,t,r){"use strict";r.r(t);var n=r(594),o=r(584),c=r(589),l={name:"MessageGroup",components:{Message:n.default,HeadingMessage:o.default,BodyMessage:c.default},props:{group:Array}},d=r(9),component=Object(d.a)(l,(function(e,t){var r=t._c;return r("div",{staticClass:"mb-2"},t._l(t.props.group,(function(e,i){return r("message",{key:i,attrs:{heading:0===i,"darken-on-hover":"",from:e.from,body:e.body,timestamp:e.timestamp}})})),1)}),[],!0,null,null,null);t.default=component.exports},658:function(e,t,r){"use strict";r.r(t);var n={name:"SearchResults",components:{SearchResult:r(626).default},props:{results:Array,hidden:Boolean},data:function(){return{}}},o=(r(636),r(9)),component=Object(o.a)(n,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-menu grey-100 py-2",class:{hidden:e.hidden}},[r("simplebar",{staticClass:"narrow-scrollbar pr-1 w-100",attrs:{"data-simplebar-auto-hide":"false","data-simplebar-force-visible":"true"}},[r("div",{staticClass:"d-block w-100 h-100"},e._l(e.results,(function(e){return r("search-result",{key:e.id,staticClass:"mb-2",attrs:{result:e}})})),1)])],1)}),[],!1,null,"39927c8a",null);t.default=component.exports},659:function(e,t,r){"use strict";r.r(t);r(16),r(10),r(14),r(19),r(13),r(20);var n=r(0),o=r(5),c=r(34);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function d(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(n.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var f={name:"UserCard",components:{Avatar:r(160).default},props:{jid:{type:String,required:!0},selected:{type:Boolean,required:!1,default:!1}},computed:d(d({},Object(c.c)({getPresence:o.Store.$getters.presence})),{},{name:function(){return this.$stanza.getLocal(this.jid)},domain:function(){return this.$stanza.getDomain(this.jid)},presence:function(){return this.getPresence(this.jid)},available:function(){var e;return null===(e=this.presence)||void 0===e?void 0:e.available},statusMessage:function(){var e;return null===(e=this.presence)||void 0===e?void 0:e.status},onlineStatus:function(){var e,t;return this.available?null!==(e=this.presence)&&void 0!==e&&e.show||!this.available?null===(t=this.presence)||void 0===t?void 0:t.show:"online":"offline"}})},m=(r(638),r(9)),h=r(15),v=r.n(h),y=r(227),component=Object(m.a)(f,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex main white--text unselectable",attrs:{"aria-selected":e.selected}},[r("div",{staticClass:"align-content-center-inline mr-1",staticStyle:{width:"36px"}},[r("badged-avatar",{attrs:{size:36,jid:e.jid,color:e.onlineStatus}})],1),e._v(" "),r("div",{staticClass:"ml-2 pr-2 my-auto hide-overflow grey-500--text"},[r("span",{class:e.selected?"font-weight-bold white--text":"grey-700--text"},[e._v(e._s(e.name))]),e._v(" "),r("span",{staticStyle:{"margin-left":"-2px","margin-right":"-2px"}},[r("v-icon",{staticClass:"no-transition",attrs:{color:"grey-400",size:"1em"}},[e._v("mdi-at")])],1),e._v(" "),r("span",{staticClass:"grey-500--text"},[e._v("\n      "+e._s(e.domain)+"\n    ")])])])}),[],!1,null,"6ccb7502",null);t.default=component.exports;v()(component,{BadgedAvatar:r(262).default}),v()(component,{VIcon:y.a})},669:function(e,t,r){"use strict";r(653)},670:function(e,t,r){var n=r(11)(!1);n.push([e.i,"@import url(https://fonts.googleapis.com/css2?family=Mukta:wght@200;300;400;500;600;700;800&display=swap);"]),n.push([e.i,".searchbar[data-v-0dd5f005]{min-width:300px;max-width:300px;width:300px}.user-card[data-v-0dd5f005]{white-space:nowrap}.user-card[data-v-0dd5f005] .badge .dot{border-color:#504945!important}.scroller[data-v-0dd5f005]>:last-child{padding-bottom:1rem!important}",""]),e.exports=n},680:function(e,t,r){"use strict";r.r(t);r(16),r(10),r(19),r(13),r(20),r(36),r(58),r(60),r(67);var n=r(7),o=r(0),c=(r(63),r(14),r(35),r(53),r(263),r(43),r(25),r(38),r(42),r(59),r(197),r(48),r(34)),l=r(5),d=r(52),f=(r(231),r(225)),m=r(657),h=r(646),v=r(658),y=r(594),w=r(584),x=r(589),M=r(40),S=r(46),_=r(686),O=r(70);function k(e,t){var r;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(r=function(e,t){if(!e)return;if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}(e))||t&&e&&"number"==typeof e.length){r&&(e=r);var i=0,n=function(){};return{s:n,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:n}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,c=!0,l=!1;return{s:function(){r=e[Symbol.iterator]()},n:function(){var e=r.next();return c=e.done,e},e:function(e){l=!0,o=e},f:function(){try{c||null==r.return||r.return()}finally{if(l)throw o}}}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var i=0,r=new Array(t);i<t;i++)r[i]=e[i];return r}function j(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function $(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?j(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):j(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var T=r(361),A={key:"chat",components:{MessageGroup:m.default,ChatMessageForm:h.default,SearchResults:v.default,Message:y.default,HeadingMessage:w.default,BodyMessage:x.default},data:function(){return{message:"",loadedMessages:[],searchActive:!1,searchText:"",searchTimeout:null,matches:[],bottomSheetItems:[{icon:"mdi-magnify",title:"Search"},{icon:"mdi-file-document",title:"Send Over A Large File"},{icon:"mdi-account-cancel",title:"Block Friend"},{icon:"mdi-account-minus",title:"Remove Friend",color:"red"}]}},computed:$($($($({},Object(c.e)(d.MessageStore.namespace,{chatComposing:d.MessageStore.$states.chatComposing})),Object(c.e)(O.SettingsStore.namespace,{activeChatReceipts:O.SettingsStore.$states.activeChatReceipts,messageReadReceipts:O.SettingsStore.$states.messageReadReceipts,sendTypingReceipts:O.SettingsStore.$states.sendTypingReceipts})),Object(c.e)({roster:l.Store.$states.roster,avatars:l.Store.$states.avatars})),{},{searchResultsClickOutside:function(){var e=this;return{handler:this.closeSearch,closeConditional:this.searchActive,include:function(){return[e.$refs.searchBar.$el]}}},bare:function(){return this.$stanza.toBare(this.$route.params.entity)},messages:function(){var e=this.$store.state[d.MessageStore.namespace][d.MessageStore.$states.messages][this.entity];return this.loadedMessages.concat(e).filter((function(e){return!!e})).sort((function(a,b){return a.timestamp-b.timestamp}))},isTyping:function(){return this.chatComposing[this.bare]}}),methods:$({sendMessage:function(e){this.$stanza.client.sendMessage({type:"chat",to:this.$route.params.entity,body:e})},composing:function(){this.sendTypingReceipts&&this.$stanza.client.sendMessage({type:"chat",to:this.bare,chatState:"composing"})},paused:function(){this.sendTypingReceipts&&this.$stanza.client.sendMessage({type:"chat",to:this.bare,chatState:"paused"})},messageGroups:function(e){if(!e.length)return[];for(var t=[[e[0]]],i=1;i<e.length;++i){var r=t[t.length-1];r[0].from!==e[i].from||r.length>=10?t.push([e[i]]):r.push(e[i])}return t},searchUpdate:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.searchTimeout){t.next=4;break}if(clearTimeout(e.searchTimeout),e.searchText.length){t.next=4;break}return t.abrupt("return");case 4:e.searchTimeout=setTimeout(e.search,100);case 5:case"end":return t.stop()}}),t)})))()},search:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,c,l,d,m,h;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Promise.all([S.a.messages.where("with").equals(e.entity).toArray().then((function(e){return[e.sort((function(a,b){return a.timestamp-b.timestamp}))]})),Object(f.search)(e.searchText).then((function(e){return e.map((function(e){return _.a(T.decompress(e.block))}))}))]).then((function(e){return e.flat(1).filter((function(e){return e.length}))}));case 2:r=t.sent,n=[],o=k(r);try{for(o.s();!(c=o.n()).done;){l=c.value,d=k(Object(f.searchBlock)(l,e.searchText));try{for(d.s();!(m=d.n()).done;)h=m.value,n.push(h)}catch(e){d.e(e)}finally{d.f()}}}catch(e){o.e(e)}finally{o.f()}e.matches=n;case 7:case"end":return t.stop()}}),t)})))()},openSearch:function(){this.searchActive||(this.matches=[],this.searchActive=!0)},closeSearch:function(){this.matches=[],this.searchActive=!1,this.searchText=""},localPart:function(e){return M.a.getLocal(e)},fetchMessages:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.$route.params.entity,t.next=3,S.a.messageArchive.where("with").equals(r).count();case 3:if(t.t0=t.sent,!(t.t0<4)){t.next=7;break}return t.next=7,e.$store.dispatch("".concat(d.MessageStore.namespace,"/").concat(d.MessageStore.$actions.syncMessages),r);case 7:return t.next=9,e.$store.dispatch("".concat(d.MessageStore.namespace,"/").concat(d.MessageStore.$actions.loadCurrentMessages),r);case 9:return e.$store.dispatch("".concat(d.MessageStore.namespace,"/").concat(d.MessageStore.$actions.syncMessages),r),t.next=12,S.a.messageArchive.orderBy("timestamp").reverse().filter((function(e){return e.with==r})).toArray();case 12:(n=t.sent.slice(0,10)).reverse(),e.loadedMessages=n.reduce((function(e,t){var r=t.block;return e.concat(_.a(T.decompress(r)))}),[]);case 15:case"end":return t.stop()}}),t)})))()},init:function(){var e=this.$refs.messageList.scrollElement;e.scroll(0,e.scrollHeight),e.onscroll=function(e){e.target}}},Object(c.d)({setActiveChat:l.Store.$mutations.setActiveChat})),watch:{$route:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return t.setActiveChat({type:"chat",entity:e.params.entity}),r.next=3,t.fetchMessages();case 3:t.init();case 4:case"end":return r.stop()}}),r)})))()}},mounted:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setActiveChat({type:"chat",entity:e.$route.params.entity}),t.next=3,e.fetchMessages();case 3:e.init();case 4:case"end":return t.stop()}}),t)})))()}},R=(r(669),r(9)),B=r(15),P=r.n(B),z=r(577),D=r(227),H=r(569),E=r(561),F=r(184),L=r.n(F),I=r(120),component=Object(R.a)(A,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"d-flex flex-column grey-200"},[r("header-bar",{staticClass:"flex-shrink-0",attrs:{mobile:e.$device.isMobileOrTablet,menu:""}},[r("user-card",{staticClass:"user-card overflow-hidden",attrs:{jid:e.bare,selected:""}}),e._v(" "),r("v-spacer"),e._v(" "),r("div",{staticClass:"py-2"},[e.$device.isMobileOrTablet?[r("v-btn",{ref:"searchBar",staticClass:"mx-2",attrs:{icon:""},on:{click:function(t){return e.$refs.mobileDialog.open()}}},[r("v-icon",{attrs:{size:"1.66em",color:"white"}},[e._v("mdi-dots-vertical")])],1),e._v(" "),r("bottom-sheet",{ref:"mobileDialog",attrs:{items:e.bottomSheetItems}})]:r("v-text-field",{ref:"searchBar",staticClass:"searchbar",attrs:{"single-line":"",dense:"",solo:"",clearable:"","hide-details":"",flat:"","background-color":"grey-100",label:"Search"},on:{focus:e.openSearch,click:e.openSearch,keydown:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"esc",27,t.key,["Esc","Escape"])?null:e.closeSearch(t)},e.searchUpdate]},model:{value:e.searchText,callback:function(t){e.searchText=t},expression:"searchText"}})],2)],1),e._v(" "),r("main",{staticClass:"d-flex flex-row flex-grow-1 hide-overflow"},[r("div",{staticClass:"d-flex flex-column flex-grow-1"},[r("simplebar",{ref:"messageList",staticClass:"simplebar-no-gutter wide-scrollbar flex-grow-1",attrs:{"data-simplebar-auto-hide":"false","data-simplebar-force-visible":"true"}},[r("div",{staticClass:"pt-4 mr-4 scroller"},e._l(e.messageGroups(e.messages),(function(e,i){return r("message-group",{key:i,attrs:{group:e}})})),1)]),e._v(" "),r("div",[r("chat-message-form",{attrs:{label:"Message "+e.bare},on:{composing:e.composing,paused:e.paused,message:e.sendMessage}},[e.isTyping?[r("typing-spinner",{staticClass:"normal ml-n2"}),e._v(" "),r("b",{staticClass:"grey-800--text"},[e._v(e._s(e.localPart(e.bare))+" is typing...")])]:e._e()],2)],1)],1),e._v(" "),r("search-results",{directives:[{name:"click-outside",rawName:"v-click-outside",value:e.searchResultsClickOutside,expression:"searchResultsClickOutside"}],attrs:{hidden:e.searchActive,results:e.matches}})],1)],1)}),[],!1,null,"0dd5f005",null);t.default=component.exports;P()(component,{UserCard:r(659).default,BottomSheet:r(265).default,HeaderBar:r(264).default,TypingSpinner:r(362).default,ChatMessageForm:r(646).default}),P()(component,{VBtn:z.a,VIcon:D.a,VSpacer:H.a,VTextField:E.a}),L()(component,{ClickOutside:I.a})}}]);